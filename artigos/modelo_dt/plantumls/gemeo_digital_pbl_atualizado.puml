@startuml
!theme plain
skinparam backgroundColor white
skinparam defaultFontSize 12
skinparam defaultFontName Arial

title Arquitetura dos Gêmeos Digitais para Avaliação Multidimensional em PBL

rectangle "Mundo Real - Ambiente PBL" as mundo_real {
  actor "Orientador(a)" as orientador
  rectangle "Grupos de Estudantes" as grupos {
    actor "Grupo 1" as g1
    actor "Grupo 2" as g2
    actor "Grupo N" as gn
  }
  rectangle "Projeto PBL\n(Metaprojeto)" as projeto {
    rectangle "Sprint 1\nArtefato A1" as s1
    rectangle "Sprint 2\nArtefato A2" as s2
    rectangle "Sprint N\nArtefato An" as sn
  }
}

rectangle "Camada de Coleta e Armazenamento" as coleta {
  rectangle "Fontes de Dados" as fontes {
    database "Repositórios\nVersionamento" as repos
    database "Sistemas\nGerenciamento\nEducacional" as sge
    database "Documentos\ne Chats" as docs
  }
  
  rectangle "Sistema de Coleta\ne Transformação" as sistema_coleta {
    process "Processamento" as proc
    process "Aplicação\nde Flags" as flags
  }
  
  database "Data Lake\ncom Versionamento" as datalake
}

rectangle "Sistema de Análise Adversarial" as analise {
  rectangle "Múltiplos Viewpoints Arquiteturais" as viewpoints {
    rectangle "Viewpoint Estrutural" as ve {
      agent "Agente de Sistema\n(LLM)" as agente_sistema
      note right: Análise de artefatos\nVisão estrutural
    }
    
    rectangle "Viewpoint Comportamental" as vb {
      agent "Agente de Processo\n(LLM)" as agente_processo  
      note right: Dinâmicas de processo\nVisão comportamental
    }
    
    rectangle "Viewpoint de Processo" as vp {
      agent "Agente de Análise\nTemporal (LLM)" as agente_temporal
      note right: Análise temporal\nEvolução dos fluxos
    }
  }
}

rectangle "Camada de Análise e Feedback" as feedback {
  process "Consolidação\nAdversarial" as consolidacao
  rectangle "Saídas" as saidas {
    rectangle "Feedback\nMultidimensional" as fb_multi
    rectangle "Alertas\nPrecoces" as alertas
    rectangle "Recomendações\nPedagógicas" as recomendacoes
  }
}

' Conexões principais
orientador --> projeto
grupos --> projeto
projeto --> repos : "Artefatos incrementais"
projeto --> sge : "Dados educacionais"
projeto --> docs : "Documentação/Comunicação"

repos --> sistema_coleta
sge --> sistema_coleta
docs --> sistema_coleta

sistema_coleta --> datalake
proc --> flags

datalake --> agente_sistema
datalake --> agente_processo
datalake --> agente_temporal

agente_sistema --> consolidacao
agente_processo --> consolidacao
agente_temporal --> consolidacao

consolidacao --> saidas

saidas --> orientador : "Feedback contínuo"
saidas --> grupos : "via orientador"

' Setas bidirecionais para mostrar fluxo contínuo
orientador <-> feedback : "Ciclo de\nmonitoramento"

note top of mundo_real : Ambiente educacional real\ncom desenvolvimento em sprints

note bottom of datalake : Rastreabilidade e\npreservação histórica

note bottom of consolidacao : Múltiplas visões\nconforme ISO/IEC/IEEE 42010:2022

@enduml